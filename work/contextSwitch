# paths
# sta='/home/stephen.smith/insidesales/sta'
# atom=''
# qb='/home/stephen.smith/insidesales/qb/src'
# release='release/train/may21'
# Config options moved to context.Config
line='======================================================================================'
# some more ls aliases
alias la='ls -A'
alias l='ls -CF'
alias ls='ls -GFh'
alias ll='ls -lhA'
alias lsl='ls -lhFA | less'
alias cd..='cd ..'
alias ..='cd ..'
alias please='sudo '
alias crap='$(thefuck $(fc -ln -1))'

alias repache='apache2ctl restart'
alias rebash='. ~/.bashrc'
alias vibash='vim ~/.bashrc'
alias vivim='vim ~/.vimrc'
alias isdc='cd ~/insidesales/'
alias querybuilder='cd ~/insidesales/qb/src'
alias sslan='ssh root@stephensmith.lan'
alias betternote='cd ~/git/betternote/'
alias arcb='arc branch blah'
alias arcblah='arc branch blah'
alias blah='arc branch blah'
alias diff='arc diff'
alias land='arc land'
alias add='sudo add-apt-repository '
alias update='sudo apt-get update'
alias upgrade='sudo apt-get upgrade'
alias install='sudo apt-get install'
alias burp='cd ~/insidesales/sta/ && git co feature/Burp-XSS-fixing'
alias xss='cd ~/insidesales/sta/ &&git co feature/Burp-XSS-fixing'
alias prep='git submodule update && composer install'
alias ant='prep && ant sfDeploy'
alias grit='git branch -a | grep -i'
alias pull='git pull'
alias vitig='vim ~/.tigrc'

# Branch names as vars
xof='feature/mingle-7451-cross-object-filters'
rbdl='feature/mingle-12595-report-based-domino'
release='release/train/apr23'
cti='feature/mingle-17304-open-cti-ui'

# git checkout command
co(){
    git checkout $1
    git pull
    composer install
    git submodule update
    git st
}

deploy(){
    co $1
    ant sfDeploy
}

co_output(){
    echo $line
    echo "$1"
    echo $line
}

# git checkout command
co(){
    co_output "Checking out $1"
    git checkout $1

    co_output "Running git pull"
    git pull

    co_output "Running composer install"
    composer install

    co_output "Running submodule update"
    git submodule update
    git st
}

#deploy to sf
deploy(){
    co $1

    co_output "Running ant sfDeploy"
    ant sfDeploy
}

description_text(){
    echo $line
    echo "Finished context switch"
    echo "SalesTeamAutomation :: $sta_repo"
    echo "Querybuilder        :: $atom_repo"
    echo "Atom                :: $qb_repo"
    echo $line
}

# run them all
context(){
    src=`pwd`
    sta_repo=$1
    qb_repo=$2
    atom_repo=$3

    description_text

    co_output "STA: Changing directory to $sta"
    if [$sta == '']; then
        co_output "STA directory not defined"
    else
        cd $sta
        co $sta_repo
    fi
    
    co_output "Atom: Changing directory to $atom"
    if [$atom == '']; then
        co_output "Atom directory not defined"
    else
        cd $atom
        co $atom_repo
    fi

    co_output "QB: changing directory to $qb"
    if [$qb == '']; then
        co_output "Querybuilder directory is not defined."
    else
        cd $qb
        deploy $qb_repo
    fi

    description_text
    cd $src   
}

# add other aliases with context $sta $qb $atom
alias release='context $release $release $release'
alias m14995='context $m14995 $release $release'
alias cti='context $cti $cti $release'

# Other usefull commands
alias grit='git branch -a | grep -i' # grit cti will list all branches with cti in the  name
